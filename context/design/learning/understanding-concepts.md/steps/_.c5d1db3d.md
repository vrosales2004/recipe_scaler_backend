---
timestamp: 'Fri Oct 17 2025 17:11:46 GMT-0400 (Eastern Daylight Time)'
parent: '[[../20251017_171146.d5f186ef.md]]'
content_id: c5d1db3dff6fbf85294922b5446c8a1f4722066f11394f8cc95bb1533a518d5a
---

# orginal reference tests for scaler

```typescript
/**
 * Scaler Test Cases
 * 
 * Demonstrates both manual scheduling and LLM-assisted scheduling
 */

import { Scaler } from './scaler';
import { GeminiLLM, Config } from './gemini-llm';
import { assert } from 'console';

/**
 * Load configuration from config.json
 */
function loadConfig(): Config {
    try {
        const config = require('./config.json');
        return config;
    } catch (error) {
        console.error('‚ùå Error loading config.json. Please ensure it exists with your API key.');
        console.error('Error details:', (error as Error).message);
        process.exit(1);
    }
}

/*
    * Test case 1: Output for scaling
    * Demonstrates adding a recipe and scaling it using the LLM and printing the results
    */
export async function simpleOutputTest(): Promise<void> {
    console.log('\nüß™ TEST CASE 1: Scaling Output');
    console.log('==================================');

    const scaler = new Scaler();

    // Example recipe for 4 people
    const ingredients = [
        { item: 'Chicken Breast', quantity: 4, unit: 'pieces', scalingContext: 'main protein' },
        { item: 'Olive Oil', quantity: 2, unit: 'tablespoons', scalingContext: 'cooking fat' },
        { item: 'Garlic', quantity: 4, unit: 'cloves', scalingContext: 'flavoring. doesnt need to scale as much' },
        { item: 'Lemon Juice', quantity: 2, unit: 'tablespoons', scalingContext: 'acid. scales more than regular ingredients' },
        { item: 'Salt', quantity: 1, unit: 'teaspoon', scalingContext: 'seasoning. doesnt need to scale as much' },
        { item: 'Black Pepper', quantity: 0.5, unit: 'teaspoon', scalingContext: 'seasoning. doesnt need to scale as much' },
        { item: 'Mixed Vegetables', quantity: 4, unit: 'cups', scalingContext: 'side dish' }
    ];

    scaler.addRecipe('Lemon Garlic Chicken', 4, 12, ingredients, ['the chicken is dry without lemon so make sure to use a lot of that']);
    const scaledIngredients = await scaler.scaleRecipe(new GeminiLLM(loadConfig()), 'Lemon Garlic Chicken');
    console.log('\nüçΩÔ∏è Scaled Ingredients for 10 people:');
    scaledIngredients.forEach(ing => {
        console.log(`- ${ing.quantity} ${ing.unit} ${ing.item} (${ing.scalingContext})`);
    });
}

/* 
    * Test case 2: Output for scaling with LLM
    * Demonstrates adding a mulitple recipes and scaling the correct one
    */
export async function llmOutputTest(): Promise<void> {
    console.log('\nüß™ TEST CASE 2: Mulitple recipes');
    console.log('==================================');

    const scaler = new Scaler();

    const ingredients1 = [
        { item: 'Spaghetti', quantity: 400, unit: 'grams', scalingContext: 'main carbohydrate' },
        { item: 'Ground Beef', quantity: 500, unit: 'grams', scalingContext: 'main protein' },
        { item: 'Tomato Sauce', quantity: 2, unit: 'cups', scalingContext: 'sauce' }
    ];

    const ingredients2 = [
        { item: 'Chicken Breast', quantity: 4, unit: 'pieces', scalingContext: 'main protein' },
        { item: 'Olive Oil', quantity: 2, unit: 'tablespoons', scalingContext: 'cooking fat' },
        { item: 'Garlic', quantity: 4, unit: 'cloves', scalingContext: 'flavoring. doesnt need to scale as much' }
    ];

    const ingredients3 = [
        { item: 'Rice', quantity: 2, unit: 'cups', scalingContext: 'main carbohydrate' },
        { item: 'Mixed Vegetables', quantity: 3, unit: 'cups', scalingContext: 'side dish' },
        { item: 'Soy Sauce', quantity: 2, unit: 'tablespoons', scalingContext: 'flavoring' }
    ];

    scaler.addRecipe('Spaghetti Bolognese', 4, 8, ingredients1, ['the sauce is important so make sure to have enough']);
    scaler.addRecipe('Lemon Garlic Chicken', 4, 12, ingredients2, ['the chicken is dry without lemon so make sure to use a lot of that']);
    scaler.addRecipe('Vegetable Stir Fry', 4, 6, ingredients3, ['make sure to keep it healthy']);

    const scaledIngredients = await scaler.scaleRecipe(new GeminiLLM(loadConfig()), 'Lemon Garlic Chicken');

    assert(scaledIngredients.length > 0, 'No ingredients returned from scaling.');
    assert(scaledIngredients.some(ing => ing.item === 'Chicken Breast'), 'Scaled ingredients do not include Chicken Breast.');
    assert(scaledIngredients.some(ing => ing.item === 'Olive Oil'), 'Scaled ingredients do not include Olive Oil.');
    assert(scaledIngredients.some(ing => ing.item === 'Garlic'), 'Scaled ingredients do not include Garlic.');
}

/*
    * Test case 3: Scaling a recipe up
    * Demonstrates scaling a recipe up where not every ingredient scales linearly
    */
export async function scalingUpTest(): Promise<void> {
    console.log('\nüß™ TEST CASE 3: Scaling Up');
    console.log('==================================');

    const scaler = new Scaler();

    // Example recipe for 2 people
    const ingredients = [
        { item: 'Pasta', quantity: 200, unit: 'grams', scalingContext: 'main carbohydrate' },
        { item: 'Tomato Sauce', quantity: 1, unit: 'cup', scalingContext: 'sauce' },
        { item: 'Parmesan Cheese', quantity: 0.5, unit: 'cup', scalingContext: 'topping. doesnt need to scale as much' },
        { item: 'Basil', quantity: 5, unit: 'leaves', scalingContext: 'garnish. doesnt need to scale as much. leaves are whole and therefore should be rounded to nearest integer' }
    ];

    scaler.addRecipe('Pasta with Tomato Sauce', 2, 10, ingredients, ['the sauce is important so make sure to have enough']);
    const scaledIngredients = await scaler.scaleRecipe(new GeminiLLM(loadConfig()), 'Pasta with Tomato Sauce');

    assert(scaledIngredients.length > 0, 'No ingredients returned from scaling.');
    assert(scaledIngredients.some(ing => ing.item === 'Parmesan Cheese'), 'Scaled ingredients do not include Cheese.');
    assert(scaledIngredients.find(ing => ing.item === 'Parmesan Cheese')!.quantity < 3, 'Cheese scaled too much.');

    // Validator for whole numbers of Basil
    assert(scaledIngredients.some(ing => ing.item === 'Basil'), 'Scaled ingredients do not include Basil.');
    assert(Number.isInteger(scaledIngredients.find(ing => ing.item === 'Basil')!.quantity), 'Basil quantity is not a whole number.');
}

/**
 * Test case 4: Scaling a recipe down
 * Demonstrates scaling a recipe down where not every ingredient scales linearly
 */
export async function scalingDownTest(): Promise<void> {
    console.log('\nüß™ TEST CASE 4: Scaling Down');
    console.log('==================================');

    const scaler = new Scaler();

    // Example recipe for 8 people
    const ingredients = [
        { item: 'Pasta', quantity: 800, unit: 'grams', scalingContext: 'main carbohydrate' },
        { item: 'Tomato Sauce', quantity: 4, unit: 'cups', scalingContext: 'sauce. do not scale down linearly to prevent dry noodles' },
        { item: 'Parmesan Cheese', quantity: 2, unit: 'cups', scalingContext: 'topping. doesnt need to scale as much' },
        { item: 'Basil', quantity: 20, unit: 'leaves', scalingContext: 'garnish. doesnt need to scale as much. leaves are whole and therefore should be rounded to nearest integer' }
    ];

    scaler.addRecipe('Pasta with Tomato Sauce', 8, 3, ingredients, ['the sauce is important so make sure to have enough']);
    const scaledIngredients = await scaler.scaleRecipe(new GeminiLLM(loadConfig()), 'Pasta with Tomato Sauce');
    
    assert(scaledIngredients.length > 0, 'No ingredients returned from scaling.');
    assert(scaledIngredients.some(ing => ing.item === 'Parmesan Cheese'), 'Scaled ingredients do not include Cheese.');
    assert(scaledIngredients.find(ing => ing.item === 'Parmesan Cheese')!.quantity > 0.75, 'Cheese scaled too much.');
    // Validator for sauce not scaling down too much
    assert(scaledIngredients.some(ing => ing.item === 'Tomato Sauce'), 'Scaled ingredients do not include Tomato Sauce.');
    assert(scaledIngredients.find(ing => ing.item === 'Tomato Sauce')!.quantity > 1.5, 'Sauce scaled too much.');
}

/*
    * Test case 5: Manual Scaling Test
    * Demonstrates adding a recipe and scaling it manually without the LLM
    */
export function manualScalingTest(): void {
    console.log('\nüß™ TEST CASE 5: Manual Scaling');
    console.log('==================================');

    const scaler = new Scaler();

    // Example recipe for 4 people
    const ingredients = [
        { item: 'Chicken Breast', quantity: 4, unit: 'pieces', scalingContext: 'main protein' },
        { item: 'Olive Oil', quantity: 2, unit: 'tablespoons', scalingContext: 'cooking fat' },
        { item: 'Garlic', quantity: 4, unit: 'cloves', scalingContext: 'flavoring. doesnt need to scale as much' },
        { item: 'Lemon Juice', quantity: 2, unit: 'tablespoons', scalingContext: 'acid. scales more than regular ingredients' },
        { item: 'Salt', quantity: 1, unit: 'teaspoon', scalingContext: 'seasoning. doesnt need to scale as much' },
        { item: 'Black Pepper', quantity: 0.5, unit: 'teaspoon', scalingContext: 'seasoning. doesnt need to scale as much' },
        { item: 'Mixed Vegetables', quantity: 4, unit: 'cups', scalingContext: 'side dish' }
    ];

    scaler.addRecipe('Lemon Garlic Chicken', 4, 12, ingredients, ['the chicken is dry without lemon so make sure to use a lot of that']);
    const result = scaler.scaleManually('Lemon Garlic Chicken');

    assert(result.length > 0, 'No ingredients returned from manual scaling.');
    assert(result.some(ing => ing.item === 'Chicken Breast'), 'Scaled ingredients do not include Chicken Breast.');
    assert(result.find(ing => ing.item === 'Chicken Breast')!.quantity === 12, 'Chicken Breast quantity incorrect.');
    assert(result.some(ing => ing.item === 'Lemon Juice'), 'Scaled ingredients do not include Lemon Juice.');
    assert(result.find(ing => ing.item === 'Lemon Juice')!.quantity === 6, 'Lemon Juice quantity incorrect.');
    assert(result.some(ing => ing.item === 'Salt'), 'Scaled ingredients do not include Salt.');
    assert(result.find(ing => ing.item === 'Salt')!.quantity === 3, 'Salt quantity incorrect.');

    console.log('\nManually Scaled Ingredients for 12 people:');
    result.forEach(ing => {
        console.log(`- ${ing.quantity} ${ing.unit} ${ing.item} (${ing.scalingContext})`);
    });
}

/**
 * Main function to run all test cases
 */
async function main(): Promise<void> {
    console.log('üéì Scaler Test Suite');
    console.log('========================\n');
    
    try {
        // Run manual scheduling test
        await simpleOutputTest();
        await llmOutputTest();
        await scalingUpTest();
        await scalingDownTest();
        manualScalingTest();
        
        console.log('\nüéâ All test cases completed successfully!');
        
    } catch (error) {
        console.error('‚ùå Test error:', (error as Error).message);
        process.exit(1);
    }
}

// Run the tests if this file is executed directly
if (require.main === module) {
    main();
}
```
